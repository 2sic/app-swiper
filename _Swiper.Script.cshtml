
@inherits Custom.Hybrid.Razor12
@using Newtonsoft.Json;
@using ToSic.Razor.Blade;

<script src="@App.Path/dist/scripts.min.js" data-enableoptimizations="false"></script>
@{
  var page = GetService<ToSic.Sxc.Web.IPageService>();
  page.Activate("turnOn"); // see https://r.2sxc.org/turnon

  var swiperData = new {
    moduleId = Content.EntityId,
    options = new {
      autoplay = (Content.Autoplay ?? App.Settings.Autoplay),
      speed = (Content.AnimationDuration ?? App.Settings.AnimationDuration),
      effectDefaults = JsonConvert.DeserializeObject(Content.Effect.Configuration),
      fallback = JsonConvert.DeserializeObject(App.Settings.EffectFallback)
    }
  };

  var swiperDataJson = JsonConvert.SerializeObject(swiperData);
}

<turnOn turn-on='{"await": ["window.appSwiper2"], "run": "window.appSwiper2.initAppSwiper()", "data": @Html.Raw(swiperDataJson) }'></turnOn>
