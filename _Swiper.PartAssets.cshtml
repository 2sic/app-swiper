@inherits Custom.Hybrid.Razor12
@using ToSic.Razor.Blade;
@{
  var page = GetService<ToSic.Sxc.Web.IPageService>();
  page.Activate("turnOn"); // see https://r.2sxc.org/turnon
  
  var swiperSettings = DynamicModel.SwiperSettings;

  var swiperData = new {
    moduleId = Content.EntityId,
    options = new {
      autoplay = swiperSettings.Autoplay,
      speed = swiperSettings.AnimationDuration,
      // The following two values are JSON strings, so we must turn them into an object
      effectDefaults = AsDynamic(swiperSettings.Effect.Configuration),
      fallback = AsDynamic(swiperSettings.EffectFallback)
    }
  };

  // Convert the configuration to JSON to add to turnOn
  var jsonService = GetService<ToSic.Sxc.Web.IJsonService>();
  var swiperJson = jsonService.ToJson(swiperData);
}
<turnOn turn-on='{"await": ["window.appSwiper2"], "run": "window.appSwiper2.init()", "data": @Html.Raw(swiperJson) }'></turnOn>
<link rel="stylesheet" href="@App.Path/dist/styles.min.css" data-enableoptimizations="true">
<script src="@App.Path/dist/scripts.min.js" data-enableoptimizations="false"></script>
